function getUrlParameter(n) {
    n = n.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
    var i = new RegExp("[\\?&]" + n + "=([^&#]*)"),
        t = i.exec(location.search);
    return t === null ? "" : decodeURIComponent(t[1].replace(/\+/g, " "))
}

function isMobileDevice() {
    return /iPhone|iPad|iPod|Android/i.test(navigator.userAgent)
}
var Global;
$(document).ready(function() {
    Global.Init();
    $("#placesTopSelect").on("click", function() {
        $("#placesTopSelect #top-down-menu").slideToggle("200", function() {})
    });
    document.addEventListener("click", function(n) {
        n.target.closest("#placesTopSelect") || $("#placesTopSelect #top-down-menu").slideUp("200", function() {})
    })
});
String.prototype.replaceAt = function(n, t) {
    return this.substr(0, n) + t + this.substr(n + t.length)
};
window.onscroll = function() {
    Global.ScrollFunction()
};
Global = {
        Items: [],
        Init: function() {
            Global.Events()
        },
        Events: function() {
            $("#btnUpPage").on("click", function() {
                Global.UpPage()
            })
        },
        ScrollFunction: function() {
        },
        UpPage: function() {
            $("html, body").animate({
                scrollTop: $("body").offset().top
            }, 2e3)
        }
    },
    function(n) {
        function t(t, i) {
            this.$caller = t;
            this.settings = n.extend({
                hiddenId: "ProductId"
            }, i);
            this.init()
        }
        n.fn.cusAutoComplete = function(n) {
            return new t(this, n)
        };
        t.prototype.init = function() {
            var t = this;
            n(this.$caller).autocomplete({
                source: t.settings.items,
                select: function(i, r) {
                    i.preventDefault();
                    t.settings.callback ? t.settings.callback(t.$caller[0].value) : (n(t.$caller).val(r.item.pname), n("#" + t.settings.hiddenId).val(r.item.itemId), n(this).parents("form").find("#siteId").val(r.item.siteId), n(this).parents("form").submit())
                },
                focus: function(i, r) {
                    i.preventDefault();
                    n(t.$caller).val(r.item.label)
                },
                change: function(i, r) {
                    r.item == null && n("#" + t.settings.hiddenId).val("")
                }
            });
            this.addEventListeners()
        };
        t.prototype.addEventListeners = function() {
            var n = this
        }
    }(jQuery);
$(document).ready(function() {
    $(".header-bootom nav .item a").click("on", function() {
        $(".header-bootom nav .item a").removeClass("active");
        $(this).addClass("active")
    });
    var n = navigator.userAgent,
        t = n.match(/iPad/i) || n.match(/iPhone/) ? "touchstart" : "click";
    $(".btn-mobile-icon").on(t, function() {
        $(".header-mobile-menu").slideToggle(600, function() {
            $(this).is(":visible") ? ($("#Nagishut").show(), $(".INDMobile #INDmenu-btn").css("bottom", "30%"), $("html").css("overflow", "hidden")) : ($("#Nagishut").hide(), $("html").css("overflow", "scroll"))
        })
    });
    Header.Init();
    SubCategoryHeader.Init();
    HeaderMediaQuery.Init()
});
var iScrollPos = 0,
    HeaderMediaQuery = {
        Init: function() {
            HeaderMediaQuery.BrackPoints()
        },
        BrackPoints: function() {
            if (matchMedia) {
                var n = window.matchMedia("(max-device-width:740px)");
                n.addListener(HeaderMediaQuery.ChangePositionMobil);
                HeaderMediaQuery.ChangePositionMobile(n)
            }
        },
        ChangePositionMobile: function(n) {
            n.matches && Header.Nagishut()
        }
    },
    Header = {
        shareUrl: location.href,
        Init: function() {
            Header.Events();
            Header.Settings()
        },
        OvverideElements: function() {
            $("#INDbtnWrap").css({
                "margin-top": "45%"
            })
        },
        Events: function() {
            $("div.header-mobile-menu > nav > div.sharing .share").on("click", function() {
                Header.Share(event)
            });
            $("form.container-search").submit(function(n) {
                $("#HeaderSearchMobHidden").val() == "" && n.preventDefault()
            });
            $(".prices-collapse").on("click", function() {
                $(".prices-collapse-items").slideToggle("200", function() {})
            });
            $(".about-collapse").on("click", function() {
                $(".about-collapse-items").slideToggle("200", function() {})
            });
            $(".about-collapse-items > div").on("click", function() {
                $(".header-mobile-menu").slideToggle(0)
            });
            $(".mailto").on("click", function() {
                Header.Mailto()
            });
            $(".three-file-collpase").on("click", function() {
                $(this).find("i").toggleClass("fa-caret-left fa-sort-desc");
                $(this).css("display") == "none" ? $(".three-file-collpase").find("i").css("margin-top", "4px") : $(".three-file-collpase").find("i").css("margin-top", "");
                $(".three-item-files").slideToggle()
            })
        },
        Settings: function() {
            $("#HeaderSearchMob").cusAutoComplete({
                items: Global.Items.map(function(n) {
                    return {
                        pname: n.label,
                        label: n.label + " (" + n.siteName + ")",
                        value: n.value,
                        siteId: n.siteId,
                        itemId: n.itemId
                    }
                }),
                hiddenId: "HeaderSearchMobHidden"
            });
            $(".about-collapse-items").hide();
            $(".prices-collapse-items").hide();
            $(".three-item-files").hide()
        },
        Share: function(n) {
            var t = "",
                i = "";
            switch (n.currentTarget.dataset.share) {
                case "whatsapp":
                    t = "whatsapp://send?text=" + Header.shareUrl;
                    i = "whatsapp share";
                    break;
                case "twitter":
                    t = "https://twitter.com/share?lang=en&text=שוק&url=" + Header.shareUrl;
                    i = "twitter share";
                    break;
                case "facebook":
                    t = "https://www.facebook.com/share.php?u=" + Header.shareUrl;
                    i = "facebook share"
            }
            window.innerWidth <= 740 ? window.open(t, "_blank") : Header.PopupWindow(t, i, 750, 300)
        },
        Mailto: function() {
            var n = "mailto:?body=" + encodeURIComponent(Header.shareUrl);
            window.location.href = n
        },
        PopupWindow: function(n, t, i, r) {
            var u = screen.width / 2 - i / 2,
                f = screen.height / 2 - r / 2;
            return window.open(n, t, "toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width=" + i + ", height=" + r + ", top=" + f + ", left=" + u)
        },
        GaPush: function(n, t) {
            dataLayer.push({
                event: "GA_Event",
                Category: "Bulldozers",
                Action: n,
                Label: t
            })
        },
        Search: function() {
            $("#SearchMob").autocomplete({
                source: function(n, t) {
                    $.ajax({
                        url: "/Search/Index",
                        type: "POST",
                        dataType: "json",
                        data: {
                            Prefix: n.term
                        },
                        success: function(n) {
                            t($.map(n, function(n) {
                                return {
                                    label: n.Name,
                                    value: n.Name
                                }
                            }))
                        }
                    })
                },
                messages: {
                    noResults: "",
                    results: function() {}
                }
            })
        },
        Nagishut: function() {
            $("#Nagishut").append(document.getElementById("INDWrap")).hide()
        },
        HeightDropMenu: function() {
            document.documentElement.clientHeight <= 740 && ($(".header-mobile-menu").css("height", document.documentElement.clientHeight - 60), $(".menu").css("height", screen.height - 217))
        },
        HeightMenu: function(n) {
            document.documentElement.clientHeight <= 740 && ($(".header-mobile-menu").css("height", n), $(".menu").css("height", screen.height - 217))
        }
    },
    SubCategoryHeader = {
        Init: function() {
            SubCategoryHeader.Settings();
            SubCategoryHeader.Events()
        },
        Events: function() {
            $(".drop-menu").on("click", function() {
                SubCategoryHeader.ToggleDropMenu()
            })
        },
        Settings: function() {
            $("#DropMenuFiles").hide()
        },
        ToggleDropMenu: function() {
            $("#DropMenuFiles").slideToggle("200", function() {
                $(this).is(":visible") ? ($(".header-bootom > nav > div.drop-menu > div.drop-menu-item1").css("background-color", "#ffffff"), $(".header-bootom > nav > div.drop-menu > div.drop-menu-item1 > i").css("display", "block")) : ($(".header-bootom > nav > div.drop-menu > div.drop-menu-item1 > i").css("display", "none"), $(".header-bootom > nav > div.drop-menu > div.drop-menu-item1").css("background-color", "#f7f6f2"))
            })
        }
    }